\begin{frame}[plain]{Steering Control}
	\large 
	\textbf{Approach}
	\begin{itemize}
		\item Approximate line
		\item Calculate direction
		\item Send data to Nano-Board
	\end{itemize}
	\pause
	\textbf{Assumptions}
	\begin{itemize}
		\item Vertical line
		\item Car position
		\item Line is highest contrast on image
	\end{itemize}
	\pause
	\textbf{Tools}
	\begin{itemize}
		\item Code in C++
		\item OpenCV
	\end{itemize}
\end{frame}

\begin{frame}[plain]{Steering Control}
	\begin{columns}[T]
		\begin{column}[T]{7cm}
			\large 
			\textbf{Algorithm}	
			\begin{enumerate}
				\visible<1->{\item Get frame of camera (15 fps)}
				\visible<2->{\item Blur Image
								\begin{itemize}
									\item Could be done by Gaussian-Filter
									\item Do it by hardware (faster)
								\end{itemize}
							}
				\visible<3->{\item Convert Image from RGB to gray}
				\visible<4->{\item Approximate gradient
								\begin{itemize}
									\item Only horizontal change
									\item Apply Mask
											$
											M=
											\begin{bmatrix}
											-1 & 0 & 1 \\
											-2 & 0 & 2 \\
											-1 & 0 & 1
											\end{bmatrix}
											$
								\end{itemize}
							}
				\visible<5->{\item Find maximum value each row
								\begin{itemize}
									\item Store points
									\item Threshold for max x,y-distance
									\item Threshold for min gradient value
								\end{itemize}
							}
			\end{enumerate}
		\end{column}
		\begin{column}[T]{5cm}
			\vspace{1cm}
			\includegraphics<1-2>[width=\textwidth]{Heikographics/line2}
			%\includegraphics<2>[width=\textwidth]{Heikographics/line2}
			\includegraphics<3>[width=\textwidth]{Heikographics/line3}
			\includegraphics<4>[width=\textwidth]{Heikographics/line4}
			\includegraphics<5>[width=\textwidth]{Heikographics/line5}
		\end{column}
	\end{columns}
\end{frame}	

\begin{frame}[plain]{Steering Control}
	\begin{columns}[T]
		\begin{column}[T]{7cm}
			\large
			\textbf{Algorithm}
			\begin{enumerate}
				\setcounter{enumi}{5}
				\visible<2->{\item Fit line on points (squared distance weighting)}
				\visible<3->{\item Calculate steering angle}
				\visible<4->{\item Add angle:\\
				 			$SteeringAngle = \alpha * NewAngle + (1-\alpha) * LastAngle$}
				\visible<5->{\item Map angle to servo levels (15 settings)}
				\visible<6->{\item Send via Uart}
			\end{enumerate}
		\end{column}
		\begin{column}[T]{5cm}
			\vspace{1cm}
			\includegraphics<1->[width=\textwidth]{Heikographics/line6}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}[plain]{Steering Control}
	\large
	\textbf{Parameters}
	\begin{itemize}
		\item Weight of new angle ($\alpha$)
		\item Threshold for distance and gradients
		\item Mapping (linear, progressing)
		\item Number of threads
	\end{itemize}
\end{frame}

%\begin{frame}[plain]{Line Detection}
%	\begin{columns}[T]
%		\begin{column}[T]{5cm}
%			\vspace{5mm}
%			Steps
%			\begin{itemize}				
%				\visible<1->{\item Get Frame from camera}
%				\visible<2->{\item Apply Gaussian Filter}
%				\visible<3->{\item Transform image from RGB to grey}
%				\visible<4->{
%				\item Approximate Gradient
%					$
%					M=
%					\begin{bmatrix}
%					-1 & 0 & 1 \\
%					-2 & 0 & 2 \\
%					-1 & 0 & 1
%					\end{bmatrix}
%					$			
%				}
%				\visible<5->{\item Calculate maximal points for each row}
%				\visible<6->{\item Fit line on points}
%				\visible<7->{\item Calculate direction of car}
%			\end{itemize}
%		\end{column}
%		\begin{column}[T]{7cm}
%			\vspace{1cm}
%			\includegraphics<1>[width=\textwidth]{Heikographics/line1}
%			\includegraphics<2>[width=\textwidth]{Heikographics/line2}
%			\includegraphics<3>[width=\textwidth]{Heikographics/line3}
%			\includegraphics<4>[width=\textwidth]{Heikographics/line4}
%			\includegraphics<5>[width=\textwidth]{Heikographics/line5}
%			\includegraphics<6>[width=\textwidth]{Heikographics/line6}
%			\includegraphics<7>[width=\textwidth]{Heikographics/line7}
%		\end{column}
%	\end{columns}
%\end{frame}


